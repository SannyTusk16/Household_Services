(function(){"use strict";var e={8690:function(e,t,s){var r=s(6848),i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[e._m(0),t("router-view")],1)},a=[function(){var e=this,t=e._self._c;return t("nav",{staticClass:"navigation-bar"},[t("div",{staticClass:"nav-container"})])}],o=s(4373);o.A.create({baseURL:"/",headers:{"Content-Type":"application/json"},withCredentials:!0});var n={name:"App"},c=n,l=s(1656),d=(0,l.A)(c,i,a,!1,null,"fa6dff86",null),u=d.exports,v=s(6178),p=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("div",{staticClass:"home-header"},[t("h2",[e._v("Household Services")]),t("h3",{staticClass:"username"},[e._v(e._s(e.username))]),t("button",{staticClass:"logout-btn",on:{click:e.logout}},[e._v("Logout")])]),null!==e.currentRole?t("div",["P"===e.currentRole?t("ServiceRequests"):e._e(),"C"===e.currentRole?t("SearchServices"):e._e(),"C"===e.currentRole?t("PrevServiceRequests"):e._e(),"C"===e.currentRole?t("DashboardBlueprint"):e._e(),"A"===e.currentRole?t("HelloWorld"):e._e()],1):e._e()])},h=[],f=(s(4114),function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{display:"flex","flex-direction":"column",gap:"10px","margin-top":"10px"}},[t("h1",[e._v(" Current Request Being Handled")]),e._m(0),e.loading?t("div",{staticStyle:{display:"flex","justify-content":"center"}},[t("p",[e._v("Loading...")])]):0==e.acceptedServiceRequests.length?t("div",{staticStyle:{"text-align":"center"}},[t("p",[e._v("No Request Being Handled At The Moment")])]):e._e(),e._l(e.acceptedServiceRequests,(function(s){return 0!==e.acceptedServiceRequests.length?t("div",{key:s.request_id,staticStyle:{display:"flex","flex-direction":"row","border-bottom":"1px solid #ccc",padding:"5px"}},[t("div",{staticStyle:{flex:"1"}},[e._v(e._s(s.request_id))]),t("div",{staticStyle:{flex:"1"}},[e._v(e._s(s.service_type))]),t("div",{staticStyle:{flex:"1"}},[e._v(" "+e._s(e.formatDate(s.date_created))+" ")]),t("div",{staticStyle:{flex:"1"}},[e._v(e._s(s.user_id))]),t("div",{staticStyle:{flex:"1"}},[e._v(" "+e._s(e.formatTime(s.date_created))+" ")]),t("div",{staticStyle:{flex:"1",display:"flex",gap:"10px"}},[t("button",{staticStyle:{"background-color":"green",color:"white",border:"none",padding:"5px",cursor:"pointer"},style:{opacity:"concluded"!==s.status.toLowerCase().trim()?.5:1,cursor:"concluded"!==s.status.toLowerCase().trim()?"not-allowed":"pointer"},attrs:{disabled:"concluded"!==s.status.toLowerCase().trim()},on:{click:function(t){return e.finishRequest(s.request_id)}}},[e._v(" Finish ")]),t("button",{staticStyle:{"background-color":"red",color:"white",border:"none",padding:"5px",cursor:"pointer"},style:{opacity:"concluded"!==s.status.toLowerCase().trim()?.5:1,cursor:"concluded"!==s.status.toLowerCase().trim()?"not-allowed":"pointer"},attrs:{disabled:"concluded"!==s.status.toLowerCase().trim()},on:{click:function(t){return e.abandonRequest(s.request_id)}}},[e._v(" Abandon ")])])]):e._e()}))],2),t("div",{staticStyle:{display:"flex","flex-direction":"column",gap:"10px","margin-top":"80px"}},[t("h1",[e._v(" Service Requests ")]),t("div",{staticStyle:{display:"flex","flex-direction":"column",gap:"10px"}},[e._m(1),e.loading?t("div",{staticStyle:{display:"flex","justify-content":"center"}},[t("p",[e._v("Loading...")])]):0==e.serviceRequests.length?t("div",{staticStyle:{"text-align":"center"}},[t("p",[e._v("No pending service requests.")])]):e._e(),e._l(e.serviceRequests,(function(s){return 0!==e.serviceRequests.length?t("div",{key:s.request_id,staticStyle:{display:"flex","flex-direction":"row","border-bottom":"1px solid #ccc",padding:"5px"}},[t("div",{staticStyle:{flex:"1"}},[e._v(e._s(s.request_id))]),t("div",{staticStyle:{flex:"1"}},[e._v(e._s(s.service_type))]),t("div",{staticStyle:{flex:"1"}},[e._v(" "+e._s(e.formatDate(s.date_created))+" ")]),t("div",{staticStyle:{flex:"1"}},[e._v(" "+e._s(e.formatTime(s.date_created))+" ")]),t("div",{class:e.statusClass(s.status),staticStyle:{flex:"1","font-weight":"bold"}},[e._v(" "+e._s(s.status)+" ")]),t("div",{staticStyle:{flex:"1",display:"flex",gap:"10px"}},[t("button",{staticStyle:{"background-color":"green",color:"white",border:"none",padding:"5px",cursor:"pointer"},on:{click:function(t){return e.acceptRequest(s.request_id)}}},[e._v("Accept")]),t("button",{staticStyle:{"background-color":"red",color:"white",border:"none",padding:"5px",cursor:"pointer"},on:{click:function(t){return e.rejectRequest(s.request_id)}}},[e._v("Reject")])])]):e._e()}))],2)]),t("div",{staticStyle:{display:"flex","flex-direction":"column",gap:"10px","margin-top":"80px"}},[t("h1",[e._v(" All Requests Handled")]),e._m(2),e.loading?t("div",{staticStyle:{display:"flex","justify-content":"center"}},[t("p",[e._v("Loading...")])]):0==e.pastServiceRequests.length?t("div",{staticStyle:{"text-align":"center"}},[t("p",[e._v("No Past Services Recorded")])]):e._e(),e._l(e.pastServiceRequests,(function(s){return 0!==e.pastServiceRequests.length?t("div",{key:s.request_id,staticStyle:{display:"flex","flex-direction":"row","border-bottom":"1px solid #ccc",padding:"5px"}},[t("div",{staticStyle:{flex:"1"}},[e._v(e._s(s.request_id))]),t("div",{staticStyle:{flex:"1"}},[e._v(e._s(s.service_type))]),t("div",{staticStyle:{flex:"1"}},[e._v(" "+e._s(e.formatDate(s.date_created))+" ")]),t("div",{staticStyle:{flex:"1"}},[e._v(" "+e._s(e.formatTime(s.date_created))+" ")]),t("div",{staticStyle:{flex:"1"}},[e._v(" "+e._s(e.formatDate(s.date_completed))+" ")]),t("div",{staticStyle:{flex:"1"}},[e._v(" "+e._s(e.formatTime(s.date_completed))+" ")]),t("div",{class:e.statusClass(s.status),staticStyle:{flex:"1","font-weight":"bold"}},[e._v(" "+e._s(s.status)+" ")])]):e._e()}))],2)])}),m=[function(){var e=this,t=e._self._c;return t("div",{staticStyle:{display:"flex","flex-direction":"row","font-weight":"bold","border-bottom":"2px solid #000","padding-bottom":"5px"}},[t("div",{staticStyle:{flex:"1"}},[e._v("Service Request ID")]),t("div",{staticStyle:{flex:"1"}},[e._v("Service Name")]),t("div",{staticStyle:{flex:"1"}},[e._v("Service Date")]),t("div",{staticStyle:{flex:"1"}},[e._v("Customer ID")]),t("div",{staticStyle:{flex:"1"}},[e._v("Service Time")]),t("div",{staticStyle:{flex:"1"}},[e._v("Actions")])])},function(){var e=this,t=e._self._c;return t("div",{staticStyle:{display:"flex","flex-direction":"row","font-weight":"bold","border-bottom":"2px solid #000","padding-bottom":"5px"}},[t("div",{staticStyle:{flex:"1"}},[e._v("Service Request ID")]),t("div",{staticStyle:{flex:"1"}},[e._v("Service Name")]),t("div",{staticStyle:{flex:"1"}},[e._v("Service Date")]),t("div",{staticStyle:{flex:"1"}},[e._v("Service Time")]),t("div",{staticStyle:{flex:"1"}},[e._v("Status")]),t("div",{staticStyle:{flex:"1"}},[e._v("Actions")])])},function(){var e=this,t=e._self._c;return t("div",{staticStyle:{display:"flex","flex-direction":"row","font-weight":"bold","border-bottom":"2px solid #000","padding-bottom":"5px"}},[t("div",{staticStyle:{flex:"1"}},[e._v("Service Request ID")]),t("div",{staticStyle:{flex:"1"}},[e._v("Service Name")]),t("div",{staticStyle:{flex:"1"}},[e._v("Service Date")]),t("div",{staticStyle:{flex:"1"}},[e._v("Service Time")]),t("div",{staticStyle:{flex:"1"}},[e._v("End Date")]),t("div",{staticStyle:{flex:"1"}},[e._v("End Time")]),t("div",{staticStyle:{flex:"1"}},[e._v("Status")])])}],_=(s(8992),s(4520),{name:"ProfessionalServiceRequests",components:{ProfessionalServiceRequests:S},data(){return{serviceRequests:[],pastServiceRequests:[],acceptedServiceRequests:[],allServiceRequests:[],loading:!0}},methods:{formatDate(e){return new Date(e).toLocaleDateString()},formatTime(e){return new Date(e).toLocaleTimeString()},async fetchRequests(){try{this.loading=!0;const e=localStorage.getItem("user_id"),t=localStorage.getItem("token");if(!e||!t)return console.error("User ID or token missing!"),alert("Authentication error. Please log in again."),void(this.loading=!1);const s=await o.A.get(`/api/user_professional_id/${e}`,{headers:{Authorization:`Bearer ${t}`}}),r=s.data.professional_id;console.log("Fetched professional ID:",r);const i=await o.A.get(`/api/professional_service_request/${r}`,{headers:{Authorization:`Bearer ${t}`}});console.log("Full API Response:",JSON.stringify(i.data,null,2));const a=i.data.requests||i.data.data?.requests||[];this.serviceRequests=a.filter((e=>"pending"===e.status.toLowerCase().trim())),this.pastServiceRequests=a.filter((e=>"pending"!==e.status.toLowerCase().trim())),this.acceptedServiceRequests=a.filter((e=>["accepted","concluded"].includes(e.status.toLowerCase().trim()))),console.log("Pending Requests:",JSON.stringify(this.serviceRequests,null,2)),console.log("Finished Requests:",JSON.stringify(this.pastServiceRequests,null,2)),console.log("History Requests (Accepted):",JSON.stringify(this.historyServiceRequests,null,2)),console.log("Accepted Requests (Accepted):",JSON.stringify(this.acceptedServiceRequests,null,2)),this.loading=!1}catch(e){console.error("Error fetching service requests:",e),alert("Failed to load service requests."),this.loading=!1}},async acceptRequest(e){try{const t=localStorage.getItem("token");await o.A.post(`/api/service-requests/${e}/accept`,{},{headers:{Authorization:`Bearer ${t}`}}),alert("Request accepted!"),this.fetchRequests()}catch(t){console.error("Failed to accept request:",t),alert("Error accepting request.")}},async rejectRequest(e){try{const t=localStorage.getItem("token");await o.A.post(`/api/service-requests/${e}/reject`,{},{headers:{Authorization:`Bearer ${t}`}}),alert("Request rejected!"),this.fetchRequests()}catch(t){console.error("Failed to reject request:",t),alert("Error rejecting request.")}},async finishRequest(e){try{const t=localStorage.getItem("token");await o.A.post(`/api/service-requests/${e}/finish`,{},{headers:{Authorization:`Bearer ${t}`}}),alert("Request Finised!"),this.fetchRequests()}catch(t){console.error("Failed to finish request:",t),alert("Error finishing request.")}},async abandonRequest(e){try{const t=localStorage.getItem("token");await o.A.post(`/api/service-requests/${e}/abandon`,{},{headers:{Authorization:`Bearer ${t}`}}),alert("Request Abandoned!"),this.fetchRequests()}catch(t){console.error("Failed to abandon request:",t),alert("Error abandon-ing request.")}},statusClass(e){return{"status-pending":"Pending"===e,"status-accepted":"Accepted"===e,"status-rejected":"Rejected"===e,"status-finished":"Finished"===e,"status-abandoned":"Abandoned"===e}}},mounted(){this.fetchRequests()}}),g=_,y=(0,l.A)(g,f,m,!1,null,"7141959a",null),S=y.exports,w=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-services"},[t("h3",[e._v("Search Services")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],attrs:{type:"text",placeholder:"Search for a service..."},domProps:{value:e.searchQuery},on:{input:[function(t){t.target.composing||(e.searchQuery=t.target.value)},e.debouncedFilterServices]}}),e.filteredServices.length?t("div",[t("ul",e._l(e.filteredServices,(function(s){return t("li",{key:s.id,on:{click:function(t){return e.goToService(s.id)}}},[t("strong",[e._v(e._s(s.name))]),e._v(" - "+e._s(s.description)+" - ₹"+e._s(s.price)+" ")])})),0)]):t("div",[t("p",[e._v(" -.- ")])])])},b=[],x=s(8626),q=s.n(x),A={name:"SearchServices",data(){return{searchQuery:"",services:[],filteredServices:[]}},methods:{async fetchServices(){try{const e=await o.A.get("/api/get_all_services");console.log("API Response:",e.data),Array.isArray(e.data)?(this.services=e.data,this.filteredServices=[],console.log("Services Loaded:",this.services)):(console.error("Unexpected API response format:",e.data),this.services=[],this.filteredServices=[])}catch(e){console.error("Error fetching services:",e)}},filterServices(){const e=this.searchQuery.toLowerCase().trim();e?(this.filteredServices=this.services.filter((t=>t.name&&t.name.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e)||t.price&&t.price.toString().includes(e))),console.log("Filtered Services:",this.filteredServices)):this.filteredServices=[]},goToService(e){this.$router.push({path:"/about",query:{id:e}}),localStorage.setItem("service_id",e)},getImageUrl(e){return`/images/service-${e}.jpg`}},mounted(){this.fetchServices(),this.debouncedFilterServices=q().debounce(this.filterServices,300)}},C=A,R=(0,l.A)(C,w,b,!1,null,"7568c748",null),k=R.exports,D=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dashboard-blueprint"},[t("div",{staticClass:"dashboard-content"},[t("h3",[e._v("All Services")]),e.loading?t("div",[e._v("Loading...")]):e.error?t("div",{staticClass:"error-message"},[e._v(e._s(e.error))]):t("div",{staticClass:"services-container"},e._l(e.services,(function(e){return t("ServiceComponent",{key:e.id,attrs:{description:e.description,serviceId:e.id,name:e.name,price:e.price}})})),1)])])},P=[],I=function(){var e=this,t=e._self._c;return t("div",{staticClass:"service-tile",on:{mouseover:function(t){e.hover=!0},mouseleave:function(t){e.hover=!1},click:e.goToService}},[t("div",{staticClass:"service-content"},[t("h3",{staticClass:"service-name"},[e._v(e._s(e.name))]),t("p",{staticClass:"service-price"},[e._v("$"+e._s(e.price.toFixed(2)))])]),t("transition",{attrs:{name:"fade"}},[e.hover?t("div",{staticClass:"service-description"},[e._v(" "+e._s(e.description)+" ")]):e._e()])],1)},$=[],N={name:"ServiceComponent",data(){return{hover:!1}},props:{name:{type:String,required:!0},description:{type:String,required:!0},price:{type:Number,required:!0},serviceId:{type:Number,required:!0}},methods:{goToService(){this.$router.push({path:"/about",query:{id:this.serviceId}}),localStorage.setItem("service_id",this.serviceId)}}},L=N,T=(0,l.A)(L,I,$,!1,null,"a27bf1e2",null),E=T.exports,U={name:"DashboardBlueprint",components:{ServiceComponent:E},data(){return{services:[],loading:!0,error:null}},methods:{async fetchServices(){try{const e=await o.A.get("/api/get_all_services");this.services=e.data,console.log("Services:",JSON.stringify(this.services,null,2))}catch(e){console.error("Error fetching services:",e),this.error="Failed to load services."}finally{this.loading=!1}},goToService(e){this.$router.push({path:"/about",query:{id:e}})}},mounted(){this.fetchServices()}},F=U,B=(0,l.A)(F,D,P,!1,null,"75046015",null),O=B.exports,V=function(){var e=this,t=e._self._c;return t("div",{staticClass:"admin-dashboard"},[t("h1",[e._v("Welcome Admin")]),t("div",{staticClass:"dashboard-container"},[t("div",{staticClass:"dashboard-section"},[t("h2",[e._v("All Users")]),t("div",{staticClass:"scrollable-content"},[t("AllUsers")],1)]),t("div",{staticClass:"dashboard-section"},[t("h2",[e._v("All Services")]),t("div",{staticClass:"scrollable-content"},[t("AllServices")],1)])])])},j=[],M=function(){var e=this,t=e._self._c;return t("div",{staticClass:"all-users"},[t("div",{staticClass:"table-section"},[t("h3",[e._v("All Professionals")]),t("table",[e._m(0),t("tbody",e._l(e.professionals,(function(s){return t("tr",{key:s.id},[t("td",[e._v(e._s(s.username))]),t("td",[e._v(e._s(s.description))]),t("td",[e._v(e._s(s.blocked?"Yes":"No"))]),t("td",[t("button",{staticClass:"block-btn",class:{"unblock-btn":s.blocked},on:{click:function(t){return e.toggleBlockUser(s.user_id,"P",s.blocked)}}},[e._v(" "+e._s(s.blocked?"Unblock":"Block")+" ")])])])})),0)])]),t("div",{staticStyle:{height:"10px"}}),t("div",{staticClass:"table-section"},[t("h3",[e._v("All Customers")]),t("table",[e._m(1),t("tbody",e._l(e.customers,(function(s){return t("tr",{key:s.id},[t("td",[e._v(e._s(s.username))]),t("td",[e._v(e._s(s.email))]),t("td",[e._v(e._s(s.blocked?"Yes":"No"))]),t("td",[t("button",{staticClass:"block-btn",class:{"unblock-btn":s.blocked},on:{click:function(t){return e.toggleBlockUser(s.user_id,"C",s.blocked)}}},[e._v(" "+e._s(s.blocked?"Unblock":"Block")+" ")])])])})),0)])])])},z=[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("Name")]),t("th",[e._v("Description")]),t("th",[e._v("Blocked")]),t("th",[e._v("Actions")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("Name")]),t("th",[e._v("Email")]),t("th",[e._v("Blocked")]),t("th",[e._v("Actions")])])])}],H=(s(1454),{name:"AllUsers",data(){return{professionals:[],customers:[]}},async created(){await this.fetchUsers()},methods:{async fetchUsers(){try{const e=localStorage.getItem("token"),t=await o.A.get("/api/get_all_professionals",{headers:{Authorization:`Bearer ${e}`}});this.professionals=t.data.professionals||[],console.log("professionals",JSON.stringify(this.professionals));const s=await o.A.get("/api/get_all_customers",{headers:{Authorization:`Bearer ${e}`}});console.log("customers",JSON.stringify(s.data.customers)),this.customers=s.data.customers||[]}catch(e){console.error("Error fetching users:",e)}},async toggleBlockUser(e,t,s){if(confirm(`Are you sure you want to ${s?"unblock":"block"} this user?`)){console.log(`Toggling block status for user ${e} with role ${t}`);try{localStorage.getItem("token");const r=await o.A.post(`/api/block_user/${e}`);console.log(r.data),r.data.success?"P"===t?this.professionals=this.professionals.map((t=>t.id===e?{...t,blocked:!s}:t)):"C"===t&&(this.customers=this.customers.map((t=>t.id===e?{...t,blocked:!s}:t))):alert("Failed to update block status.")}catch(r){console.error("Error updating block status:",r),alert("Failed to update block status.")}}}}}),Q=H,J=(0,l.A)(Q,M,z,!1,null,"71708b76",null),W=J.exports,G=function(){var e=this,t=e._self._c;return t("div",{staticClass:"all-services"},[t("div",{staticClass:"table-section"},[t("table",[e._m(0),t("tbody",e._l(e.services,(function(s){return t("tr",{key:s.service_id},[t("td",[e._v(e._s(s.name))]),t("td",[e._v(e._s(s.description))]),t("td",[e._v("$"+e._s(s.price.toFixed(2)))])])})),0)])]),t("button",{staticClass:"add-service-btn",on:{click:function(t){e.showModal=!0}}},[e._v("Add Service")]),e.showModal?t("div",{staticClass:"modal-overlay"},[t("div",{staticClass:"modal"},[t("h3",[e._v("Add New Service")]),t("label",[e._v("Service Name:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newService.service_name,expression:"newService.service_name"}],attrs:{type:"text",placeholder:"Enter service name"},domProps:{value:e.newService.service_name},on:{input:function(t){t.target.composing||e.$set(e.newService,"service_name",t.target.value)}}}),t("label",[e._v("Description:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newService.description,expression:"newService.description"}],attrs:{type:"text",placeholder:"Enter description"},domProps:{value:e.newService.description},on:{input:function(t){t.target.composing||e.$set(e.newService,"description",t.target.value)}}}),t("label",[e._v("Price:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newService.price,expression:"newService.price"}],attrs:{type:"number",placeholder:"Enter price"},domProps:{value:e.newService.price},on:{input:function(t){t.target.composing||e.$set(e.newService,"price",t.target.value)}}}),t("div",{staticClass:"modal-actions"},[t("button",{on:{click:e.addService}},[e._v("Add")]),t("button",{on:{click:function(t){e.showModal=!1}}},[e._v("Cancel")])])])]):e._e()])},K=[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("Service Name")]),t("th",[e._v("Description")]),t("th",[e._v("Price")])])])}],X={name:"AllServices",data(){return{services:[],showModal:!1,newService:{service_name:"",description:"",price:null}}},async created(){await this.fetchServices()},methods:{async fetchServices(){try{const e=await o.A.get("/api/get_all_services");console.log("Services:",JSON.stringify(e.data,null,2)),this.services=e.data||[]}catch(e){console.error("Error fetching services:",e)}},async addService(){if(this.newService.service_name&&this.newService.price)try{const e=await o.A.post("/api/add_service",this.newService);e.data.success?(this.services.push({service_id:e.data.service_id,...this.newService}),alert("Service added successfully!"),this.showModal=!1,this.newService={service_name:"",description:"",price:null}):alert("Failed to add service.")}catch(e){console.error("Error adding service:",e),alert("Failed to add service.")}else alert("Service name and price are required!")}}},Y=X,Z=(0,l.A)(Y,G,K,!1,null,"952827d6",null),ee=Z.exports,te={name:"AdminDashboard",components:{AllUsers:W,AllServices:ee}},se=te,re=(0,l.A)(se,V,j,!1,null,"0a06ddfe",null),ie=re.exports,ae=function(){var e=this,t=e._self._c;return t("div",{staticClass:"service-requests-container"},[t("h1",[e._v("Previous Service Requests")]),e.serviceRequests.length>0?t("div",{staticClass:"table-wrapper"},[t("table",[e._m(0),t("tbody",e._l(e.serviceRequests.slice(-3),(function(s){return t("tr",{key:s.id},[t("td",[e._v(e._s(s.date_created))]),t("td",[e._v(e._s(s.additional_details))]),t("td",[e._v(e._s(s.professional_id))]),t("td",{class:e.getStatusClass(s.status)},[e._v(" "+e._s(s.status)+" ")]),t("td",["Pending"===s.status||"Accepted"===s.status?t("button",{staticClass:"btn btn-conclude",on:{click:function(t){return e.concludeRequest(s.id)}}},[e._v(" Conclude ")]):e._e(),"Finished"===s.status||"Abandoned"===s.status?t("button",{staticClass:"btn btn-review",on:{click:function(t){return e.openReviewModal(s.professional_id)}}},[e._v(" Give Review ")]):e._e()])])})),0)])]):t("div",{staticClass:"no-requests"},[t("p",[e._v("No previous service requests found.")])]),e.showModal?t("div",{staticClass:"modal-overlay"},[t("div",{staticClass:"modal-content"},[t("h2",[e._v("Give Review")]),t("label",{attrs:{for:"rating"}},[e._v("Rating (1-5):")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.reviewData.rating,expression:"reviewData.rating"}],attrs:{type:"number",id:"rating",min:"1",max:"5"},domProps:{value:e.reviewData.rating},on:{input:function(t){t.target.composing||e.$set(e.reviewData,"rating",t.target.value)}}}),t("label",{attrs:{for:"review"}},[e._v("Review:")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.reviewData.review,expression:"reviewData.review"}],attrs:{id:"review"},domProps:{value:e.reviewData.review},on:{input:function(t){t.target.composing||e.$set(e.reviewData,"review",t.target.value)}}}),t("div",{staticClass:"modal-actions"},[t("button",{staticClass:"btn btn-submit",on:{click:e.submitReview}},[e._v("Submit")]),t("button",{staticClass:"btn btn-cancel",on:{click:e.closeModal}},[e._v("Cancel")])])])]):e._e()])},oe=[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("Date")]),t("th",[e._v("Details")]),t("th",[e._v("Professional ID")]),t("th",[e._v("Status")]),t("th",[e._v("Actions")])])])}],ne={name:"ServiceRequests",data(){return{serviceRequests:[],showModal:!1,reviewData:{professional_id:null,rating:"",review:""}}},methods:{getStatusClass(e){switch(e){case"Pending":return"status-pending";case"Concluded":return"status-concluded";case"Finished":return"status-finished";case"Rejected":return"status-rejected";case"Abandoned":return"status-abandoned";default:return"status-default"}},async fetchServiceRequests(){try{const e=localStorage.getItem("token");if(!e)return void console.error("Missing token");const t=await o.A.get("/api/past-service-requests-customers",{headers:{Authorization:`Bearer ${e}`}});console.log("past services:",JSON.stringify(t.data,null,2)),Array.isArray(t.data)?this.serviceRequests=t.data:(console.error("Unexpected API response format:",t.data),this.serviceRequests=[])}catch(e){console.error("Error fetching service requests:",e)}},async concludeRequest(e){try{const t=localStorage.getItem("token");if(!t)return void console.error("Missing token");const s=await o.A.post(`/api/conclude-request/${e}`,{},{headers:{Authorization:`Bearer ${t}`}});console.log(s.data),alert("Request has been concluded!"),await this.fetchServiceRequests()}catch(t){console.error("Error concluding request:",t),alert("Failed to conclude request.")}},openReviewModal(e){this.reviewData.professional_id=e,this.showModal=!0,document.body.classList.add("modal-open")},closeModal(){this.showModal=!1,document.body.classList.remove("modal-open")},async submitReview(){try{const e=localStorage.getItem("token");if(!e)return void console.error("Missing token");if(!this.reviewData.professional_id)return console.error("Missing professional_id for review"),void alert("Error: Missing professional ID.");const t=await o.A.post("/api/submit-review",this.reviewData,{headers:{Authorization:`Bearer ${e}`}});console.log(t.data),alert("Review submitted successfully!"),this.closeModal()}catch(e){console.error("Error submitting review:",e),alert("Failed to submit review.")}}},async created(){await this.fetchServiceRequests()}},ce=ne,le=(0,l.A)(ce,ae,oe,!1,null,"76153692",null),de=le.exports,ue={components:{ServiceRequests:S,SearchServices:k,DashboardBlueprint:O,HelloWorld:ie,PrevServiceRequests:de},data(){return{username:"Loading...",currentRole:null}},async created(){await this.fetchUserRole(),await this.getUserName()},methods:{async getUserName(){try{const e=localStorage.getItem("token"),t=localStorage.getItem("user_id");if(!t)return void console.error("No user_id found in localStorage!");const s=await o.A.get(`/api/get_user_name/${t}`,{headers:{Authorization:`Bearer ${e}`}});console.log("Fetched User Name:",s.data.username),this.username=s.data.username}catch(e){console.error("Error fetching user name:",e),this.username="Unknown"}},async logout(){try{console.log("Logging out..."),localStorage.clear(),sessionStorage.clear(),this.$router.push("/")}catch(e){console.error("Logout error:",e)}},async fetchUserRole(){const e=localStorage.getItem("token");if(!e)return console.log("No token found, redirecting..."),void this.$router.push("/login");try{const t=await o.A.get("/api/current_user",{headers:{Authorization:`Bearer ${e}`}});if(!t.data||!t.data.role)throw new Error("Invalid role data received");console.log("User Role:",t.data.role),this.currentRole=t.data.role,localStorage.setItem("role",this.currentRole),localStorage.setItem("user_id",t.data.user_id)}catch(t){console.error("Error fetching role:",t),localStorage.removeItem("token"),localStorage.removeItem("role"),this.$router.push("/login")}}}},ve=ue,pe=(0,l.A)(ve,p,h,!1,null,"58e67956",null),he=pe.exports,fe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"hello"},[t("h2",[e._v("HouseHold Services App")]),t("div",{staticClass:"empty"}),t("div",{staticClass:"form-container"},["login"===e.currentView?t("UserLoginView",{on:{"switch-view":e.switchView}}):e._e(),"register"===e.currentView?t("UserRegisterView",{on:{"switch-view":e.switchView}}):e._e()],1)])},me=[],_e=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("h2",[e._v("Login")]),t("div",{staticClass:"input-group"},[t("label",{attrs:{for:"mail_id"}},[e._v("Mail ID")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.mail_id,expression:"mail_id"}],attrs:{type:"text",id:"mail_id",required:""},domProps:{value:e.mail_id},on:{input:function(t){t.target.composing||(e.mail_id=t.target.value)}}})]),t("div",{staticClass:"input-group"},[t("label",{attrs:{for:"password"}},[e._v("Password")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",id:"password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),t("button",{staticClass:"login-btn",on:{click:e.login}},[e._v("Login")]),t("router-link",{attrs:{to:"/register"}},[t("button",{staticClass:"register-btn"},[e._v("Register")])]),t("div",{staticClass:"recaptcha-container"},[t("vue-recaptcha",{ref:"recaptcha",attrs:{sitekey:"6Lc1lAsrAAAAAPz9TfqUGQMogpi-WDtOK7tVTjpX"},on:{verify:e.onCaptchaVerified,expired:e.onCaptchaExpired}})],1)],1)},ge=[],ye=s(1805),Se={components:{"vue-recaptcha":ye.A},data(){return{mail_id:"",password:"",recaptchaToken:null}},methods:{onCaptchaVerified(e){this.recaptchaToken=e},onCaptchaExpired(){this.recaptchaToken=null},async login(){if(this.recaptchaToken)try{const e=await o.A.post("/api/login",{mail_id:this.mail_id,password:this.password,recaptcha_token:this.recaptchaToken});if(e.data.access_token){const t=e.data.access_token;localStorage.setItem("token",t),alert("Login successful!"),this.$router.push("/home")}}catch(e){console.error("Login Error:",e),alert("Invalid credentials or failed CAPTCHA. Please try again."),this.$refs.recaptcha.reset(),this.recaptchaToken=null}else alert("Please complete the CAPTCHA.")}}},we=Se,be=(0,l.A)(we,_e,ge,!1,null,"0a45eb84",null),xe=be.exports,qe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"hello"},[t("div",{staticClass:"empty"}),t("div",{staticClass:"form-container"},[t("h2",[e._v("Register")]),t("form",{on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[t("div",{staticClass:"input-group"},[t("label",[e._v("Email:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.email,expression:"formData.email"}],attrs:{type:"email",required:""},domProps:{value:e.formData.email},on:{input:function(t){t.target.composing||e.$set(e.formData,"email",t.target.value)}}})]),t("div",{staticClass:"input-group"},[t("label",[e._v("Username:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.username,expression:"formData.username"}],attrs:{type:"text",required:""},domProps:{value:e.formData.username},on:{input:function(t){t.target.composing||e.$set(e.formData,"username",t.target.value)}}})]),t("div",{staticClass:"input-group"},[t("label",[e._v("Address:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.address,expression:"formData.address"}],attrs:{type:"text",required:""},domProps:{value:e.formData.address},on:{input:function(t){t.target.composing||e.$set(e.formData,"address",t.target.value)}}})]),t("div",{staticClass:"input-group"},[t("label",[e._v("Phone:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.phone,expression:"formData.phone"}],attrs:{type:"text",required:""},domProps:{value:e.formData.phone},on:{input:function(t){t.target.composing||e.$set(e.formData,"phone",t.target.value)}}})]),t("div",{staticClass:"input-group"},[t("label",[e._v("Password:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.password,expression:"formData.password"}],attrs:{type:"password",required:""},domProps:{value:e.formData.password},on:{input:function(t){t.target.composing||e.$set(e.formData,"password",t.target.value)}}})]),t("div",{staticClass:"role-selection-bar"},[t("button",{staticClass:"role-option",class:{selected:"C"===e.formData.role},attrs:{type:"button"},on:{click:function(t){e.formData.role="C"}}},[e._v(" Customer ")]),t("button",{staticClass:"role-option",class:{selected:"P"===e.formData.role},attrs:{type:"button"},on:{click:function(t){e.formData.role="P"}}},[e._v(" Service Professional ")])]),"P"===e.formData.role?t("div",{staticClass:"input-group"},[t("label",[e._v("Resume (PDF only):")]),t("input",{attrs:{type:"file",accept:"application/pdf"},on:{change:e.handleFileUpload}})]):e._e(),"P"===e.formData.role?t("div",{staticClass:"input-group"},[t("label",[e._v("Service Type:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.formData.service_type,expression:"formData.service_type"}],attrs:{required:""},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.formData,"service_type",t.target.multiple?s:s[0])}}},[t("option",{attrs:{value:"",disabled:""}},[e._v("Select a service")]),e._l(e.services,(function(s){return t("option",{key:s.id,domProps:{value:s.name}},[e._v(" "+e._s(s.name)+" ")])}))],2)]):e._e(),t("button",{staticClass:"register-btn",attrs:{type:"submit"}},[e._v("Register")]),t("div",{staticClass:"recaptcha-container"},[t("vue-recaptcha",{ref:"recaptcha",attrs:{sitekey:"6Lc1lAsrAAAAAPz9TfqUGQMogpi-WDtOK7tVTjpX"},on:{verify:e.onCaptchaVerified,expired:e.onCaptchaExpired}})],1)])])])},Ae=[],Ce={components:{"vue-recaptcha":ye.A},name:"UserRegisterView",data(){return{formData:{email:"",username:"",address:"",phone:"",password:"",role:"C",resume:null,service_type:"",recaptchaToken:null},services:[]}},methods:{onCaptchaVerified(e){this.recaptchaToken=e},onCaptchaExpired(){this.recaptchaToken=null},async fetchServices(){try{const e=await o.A.get("/api/get_all_services");this.services=e.data}catch(e){console.error("Failed to fetch services:",e)}},handleFileUpload(e){const t=e.target.files[0];t&&"application/pdf"===t.type?this.formData.resume=t:(alert("Please upload a valid PDF file."),e.target.value="")},async handleSubmit(){if(!this.recaptchaToken)return void alert("Please complete the CAPTCHA.");if("P"===this.formData.role&&!this.formData.resume)return void alert("Please upload your resume.");const e=new FormData;e.append("email",this.formData.email),e.append("username",this.formData.username),e.append("address",this.formData.address),e.append("phone",this.formData.phone),e.append("password",this.formData.password),e.append("role",this.formData.role),e.append("service_type",this.formData.service_type),e.append("description","hi there"),"P"===this.formData.role&&e.append("resume",this.formData.resume);try{const t=await o.A.post("/api/register",e);console.log("Response:",t.data),alert(t.data.message),this.$router.push("/")}catch(t){console.error("Registration failed:",t),alert(t.response?.data?.message||"Registration failed.")}}},mounted(){this.fetchServices()}},Re=Ce,ke=(0,l.A)(Re,qe,Ae,!1,null,"03a831cb",null),De=ke.exports,Pe={name:"LoginView",components:{UserLoginView:xe,UserRegisterView:De},data(){return{currentView:"login"}},methods:{switchView(e){this.currentView=e}}},Ie=Pe,$e=(0,l.A)(Ie,fe,me,!1,null,"09ca5360",null),Ne=$e.exports,Le=function(){var e=this,t=e._self._c;return t("div",{staticClass:"hello"},[t("h2",[e._v("HouseHold Services App")]),t("div",{staticClass:"empty"}),t("div",{staticClass:"form-container"},["register"===e.currentView?t("UserRegisterView",{on:{"switch-view":e.switchView}}):e._e()],1)])},Te=[],Ee={name:"RegisterView",components:{UserRegisterView:De},data(){return{currentView:"register"}},methods:{switchView(e){this.currentView=e}}},Ue=Ee,Fe=(0,l.A)(Ue,Le,Te,!1,null,"b1ad0d2a",null),Be=Fe.exports,Oe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("div",{staticClass:"home-header",staticStyle:{display:"flex","flex-direction":"row",gap:"40px"}},[t("h2",{staticStyle:{flex:"10"}},[e._v("Household Services")]),t("h3",{staticStyle:{flex:"1"}},[e._v(e._s(e.username))]),t("router-link",{attrs:{to:"/login"}},[t("button",{staticClass:"logout-btn"},[e._v("Logout")])])],1),t("h1",[e._v(e._s(e.service_name))]),e.service_id?t("SearchProfessional"):e._e(),t("ProfessionalsByService")],1)},Ve=[],je=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-professionals"},[t("h3",[e._v("Search Professionals")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],attrs:{type:"text",placeholder:"Search for a professional..."},domProps:{value:e.searchQuery},on:{input:[function(t){t.target.composing||(e.searchQuery=t.target.value)},e.debouncedFilterProfessionals]}}),e.filteredProfessionals.length?t("div",[t("ul",e._l(e.filteredProfessionals,(function(s){return t("li",{key:s.professional_id,on:{click:function(t){return e.goToProfessional(s.professional_id)}}},[t("strong",[e._v(e._s(s.username))]),e._v(" - "+e._s(s.description)+" - ₹"+e._s(s.price)+" "),t("img",{staticClass:"professional-img",attrs:{src:e.getImageUrl(s.professional_id),alt:"Professional Image"},on:{click:function(t){return t.stopPropagation(),e.goToProfessional(s.professional_id)}}})])})),0)]):t("div",[t("p",[e._v("Enter a valid query")])])])},Me=[],ze={name:"SearchProfessionals",data(){return{searchQuery:"",professionals:[],filteredProfessionals:[],debouncedFilterProfessionals:null}},methods:{async fetchProfessionals(){try{const e=localStorage.getItem("service_id"),t=await o.A.get(`/api/get_service_professionals/${e}`);console.log("API Response:",JSON.stringify(t.data,null,2)),Array.isArray(t.data.professionals)?this.professionals=t.data.professionals:(console.error("Unexpected API response format:",t.data),this.professionals=[])}catch(e){console.error("Error fetching professionals:",e)}},filterProfessionals(){const e=this.searchQuery.toLowerCase().trim();e?(this.filteredProfessionals=this.professionals.filter((t=>t.username&&t.username.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e)||t.price&&t.price.toString().includes(e))),console.log("Filtered professionals:",this.filteredProfessionals)):this.filteredProfessionals=[]},goToProfessional(e){console.log("Navigating to professional:",e),this.$router.push({path:"/about",query:{id:e}}),localStorage.setItem("professional_id",e)},getImageUrl(e){return`/images/professional-${e}.jpg`}},mounted(){this.fetchProfessionals(),this.debouncedFilterProfessionals=q().debounce(this.filterProfessionals,300)}},He=ze,Qe=(0,l.A)(He,je,Me,!1,null,"b84bb256",null),Je=Qe.exports,We=function(){var e=this,t=e._self._c;return t("div",{staticClass:"professionals-by-service"},[t("h3",[e._v("Professionals for "+e._s(e.service_name))]),e.loading?t("div",[t("p",[e._v("Loading professionals...")])]):e.professionals.length?t("div",[t("table",[e._m(0),t("tbody",e._l(e.professionals,(function(s){return t("tr",{key:s.professional_id},[t("td",[t("strong",[e._v(e._s(s.username))])]),t("td",[e._v(e._s(s.description))]),t("td",[e._v("⭐ "+e._s(s.rating?Number(s.rating).toFixed(2):"N/A"))]),t("td",[t("button",{on:{click:function(t){return e.goToProfessional(s.professional_id)}}},[e._v("View")])])])})),0)])]):t("div",[t("p",[e._v("No professionals available for this service.")])])])},Ge=[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("Professional Name")]),t("th",[e._v("Description")]),t("th",[e._v("Rating")]),t("th",[e._v("Actions")])])])}],Ke={name:"ProfessionalsByService",data(){return{professionals:[],service_name:"Loading...",loading:!0}},async created(){await this.fetchServiceDetails(),await this.fetchProfessionals()},methods:{async fetchServiceDetails(){try{const e=localStorage.getItem("service_id"),t=await o.A.get(`/api/get_service/${e}`);this.service_name=t.data.service_name}catch(e){console.error("Error fetching service details:",e)}},async fetchProfessionals(){try{const e=localStorage.getItem("service_id"),t=await o.A.get(`/api/get_service_professionals/${e}`);console.log("API Response:",t.data),Array.isArray(t.data.professionals)?this.professionals=t.data.professionals.map((e=>({...e,rating:e.rating?Number(e.rating).toFixed(2):null}))):console.error("Unexpected API response format:",t.data)}catch(e){console.error("Error fetching professionals:",e)}finally{this.loading=!1}},goToProfessional(e){console.log("Navigating to professional details:",e),this.$router.push({path:"/professionalDetails",query:{id:e}}),localStorage.setItem("professional_id",e)}}},Xe=Ke,Ye=(0,l.A)(Xe,We,Ge,!1,null,"949fa458",null),Ze=Ye.exports,et={components:{SearchProfessional:Je,ProfessionalsByService:Ze},data(){return{username:"Loading...",currentRole:null,service_id:localStorage.getItem("service_id"),service_name:"Loading...",service_description:"Loading..."}},async created(){await this.fetchUserRole(),await this.getUserName(),await this.getServiceDetails()},methods:{async getUserName(){try{const e=localStorage.getItem("token"),t=localStorage.getItem("user_id"),s=await o.A.get(`/api/get_user_name/${t}`,{headers:{Authorization:`Bearer ${e}`}});console.log("Fetched User Name from API:",s.data.username),this.username=s.data.username}catch(e){console.error("Error fetching user name:",e)}},async getServiceDetails(){try{const e=localStorage.getItem("service_id"),t=await o.A.get(`/api/get_service/${e}`);console.log("Fetched Service Details from API:",JSON.stringify(t.data)),this.service_name=t.data.service_name,this.service_description=t.data.service_description}catch(e){console.error("Error fetching service details:",e)}},async logout(){try{console.log("Logging out..."),localStorage.clear(),sessionStorage.clear(),this.$router.push("/")}catch(e){console.error("Logout error:",e)}},async fetchUserRole(){const e=localStorage.getItem("token");if(!e)return console.log("No token found, redirecting to login..."),void this.$router.push("/login");try{const t=await o.A.get("/api/current_user",{headers:{Authorization:`Bearer ${e}`}});if(localStorage.setItem("user_id",t.data.user_id),!t.data||!t.data.role)throw new Error("Invalid role data received");console.log("Fetched Role from API:",t.data.role),this.currentRole=t.data.role,localStorage.setItem("role",this.currentRole)}catch(t){console.error("Error fetching user role:",t),localStorage.removeItem("token"),localStorage.removeItem("role"),this.$router.push("/login")}}}},tt=et,st=(0,l.A)(tt,Oe,Ve,!1,null,"70173252",null),rt=st.exports,it=function(){var e=this,t=e._self._c;return t("div",{staticClass:"professional-details"},[t("h1",[e._v("Professional Details")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.additionalDetails,expression:"additionalDetails"}],staticClass:"additional-details-input",attrs:{placeholder:"Enter additional details (optional)",rows:"3"},domProps:{value:e.additionalDetails},on:{input:function(t){t.target.composing||(e.additionalDetails=t.target.value)}}}),t("button",{staticClass:"send-request-btn",attrs:{disabled:e.disableRequestButton},on:{click:e.sendServiceRequest}},[e._v(" "+e._s(e.disableRequestButton?"Professional is Busy":"Send Service Request")+" ")]),e.loading?t("div",[e._v("Loading...")]):t("div",[t("div",{staticClass:"info-box"},[t("h2",[e._v(e._s(e.professional.name))]),t("p",[t("strong",[e._v("ID:")]),e._v(" "+e._s(e.professional.id))]),t("p",[t("strong",[e._v("Email:")]),e._v(" "+e._s(e.professional.email))]),t("p",[t("strong",[e._v("Phone:")]),e._v(" "+e._s(e.professional.phone))]),t("p",[t("strong",[e._v("Address:")]),e._v(" "+e._s(e.professional.address))]),t("p",[t("strong",[e._v("Service Type:")]),e._v(" "+e._s(e.professional.service_type))])]),t("h2",[e._v("Service Requests Handled")]),e.serviceRequests.length?t("table",[e._m(0),t("tbody",e._l(e.serviceRequests,(function(s){return t("tr",{key:s.request_id},[t("td",[e._v(e._s(s.request_id))]),t("td",[e._v(e._s(s.username||"Loading..."))]),t("td",[e._v(e._s(s.service_type))]),t("td",{class:e.getStatusClass(s.status)},[e._v(e._s(s.status))]),t("td",[e._v(e._s(s.date_created))]),t("td",[e._v(e._s(s.date_completed))])])})),0)]):t("p",[e._v("No service requests found.")])])])},at=[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("Request ID")]),t("th",[e._v("Customer Name")]),t("th",[e._v("Service")]),t("th",[e._v("Status")]),t("th",[e._v("Date Created")]),t("th",[e._v("Date Completed")])])])}],ot={name:"ProfessionalDetails",data(){return{professional:{id:"",name:"Loading...",email:"",phone:"",address:"",service_type:""},additionalDetails:"",serviceRequests:[],loading:!0,disableRequestButton:!0}},async created(){await this.fetchProfessionalDetails(),await this.fetchServiceRequests(),await this.checkProfessionalPending()},methods:{getStatusClass(e){switch(e.toLowerCase()){case"finished":return"status-finished";case"abandoned":return"status-abandoned";case"pending":return"status-pending";default:return""}},async checkProfessionalPending(){try{const e=this.$route.query.id||localStorage.getItem("professional_id"),t=await o.A.get(`/api/check_professional_pending/${e}`),{professional_has_pending:s}=t.data;this.disableRequestButton=s}catch(e){console.error("Error checking professional's pending requests:",e),this.disableRequestButton=!0}},async sendServiceRequest(){try{const e=this.$route.query.id||localStorage.getItem("professional_id"),t=localStorage.getItem("user_id");if(console.log("Sending request with:",{professional_id:e,user_id:t,service_type:this.professional.service_type,additional_details:this.additionalDetails}),!t||!this.professional.service_type)return void alert("User ID or Service Type is missing!");const s=await o.A.post("/api/create_service_request",{professional_id:e,user_id:t,service_type:this.professional.service_type,additional_details:this.additionalDetails||""});alert(s.data.message),this.additionalDetails=""}catch(e){console.error("Error sending service request:",e),alert(e.response?.data?.error||"Failed to send request")}},async fetchProfessionalDetails(){try{const e=this.$route.query.id||localStorage.getItem("professional_id");if(!e)return void console.error("Professional ID is missing!");const t=await o.A.get(`/api/get_professional/${e}`),s=t.data,r=await o.A.get(`/api/get_user/${s.user_id}`),i=r.data;this.professional={id:s.user_id,name:i.name,email:i.email,phone:i.phone,address:i.address,service_type:s.service_type}}catch(e){console.error("Error fetching professional details:",e)}},async fetchServiceRequests(){try{const t=this.$route.query.id||localStorage.getItem("professional_id"),s=await o.A.get(`/api/professional_service_request/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("Service Requests:",JSON.stringify(s.data,null,2));let r=s.data.requests||[];for(let i of r)try{console.log("Fetching customer name for ID",i.user_id),user_id=i.user_id;const e=await o.A.get(`/api/get_user/${user_id}`);i.customer_name=e.data.name}catch(e){console.error(`Error fetching customer name for ID ${i.customer_id}:`,e),i.customer_name="Unknown"}this.serviceRequests=r}catch(e){console.error("Error fetching service requests:",e)}finally{this.loading=!1}}}},nt=ot,ct=(0,l.A)(nt,it,at,!1,null,"298dd657",null),lt=ct.exports;r.Ay.use(v.Ay);const dt=[{path:"/home",name:"home",component:he},{path:"/",name:"login",component:Ne},{path:"/register",name:"register",component:Be},{path:"/about",name:"about",component:rt},{path:"/professionalDetails",name:"professionalDetails",component:lt}],ut=new v.Ay({mode:"history",base:"/",routes:dt});var vt=ut;r.Ay.config.productionTip=!1,new r.Ay({router:vt,render:e=>e(u)}).$mount("#app")}},t={};function s(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}s.m=e,function(){var e=[];s.O=function(t,r,i,a){if(!r){var o=1/0;for(d=0;d<e.length;d++){r=e[d][0],i=e[d][1],a=e[d][2];for(var n=!0,c=0;c<r.length;c++)(!1&a||o>=a)&&Object.keys(s.O).every((function(e){return s.O[e](r[c])}))?r.splice(c--,1):(n=!1,a<o&&(o=a));if(n){e.splice(d--,1);var l=i();void 0!==l&&(t=l)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,i,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var i,a,o=r[0],n=r[1],c=r[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(i in n)s.o(n,i)&&(s.m[i]=n[i]);if(c)var d=c(s)}for(t&&t(r);l<o.length;l++)a=o[l],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(d)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[504],(function(){return s(8690)}));r=s.O(r)})();
//# sourceMappingURL=app.c198ea8c.js.map